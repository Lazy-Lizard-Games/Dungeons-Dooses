[gd_scene load_steps=32 format=3 uid="uid://h8avmsseusoj"]

[ext_resource type="Script" path="res://entities/mobs/slime/slime.gd" id="1_0wyur"]
[ext_resource type="Texture2D" uid="uid://c380v3pdy58qr" path="res://entities/mobs/slime/slime_spritesheet.png" id="2_e62wc"]
[ext_resource type="PackedScene" uid="uid://ctexjtf10m8x2" path="res://components/hitbox/hitbox_component.tscn" id="2_vhuxq"]
[ext_resource type="PackedScene" uid="uid://b23qvw2iygdut" path="res://components/health/health_component.tscn" id="3_oqi6j"]
[ext_resource type="PackedScene" uid="uid://651c5uaw2i5w" path="res://components/stamina/stamina_component.tscn" id="4_w2iwv"]
[ext_resource type="PackedScene" uid="uid://c85a28w4mmbak" path="res://components/ability/ability_component.tscn" id="5_hvo60"]
[ext_resource type="PackedScene" uid="uid://b2xuxm77exq2w" path="res://components/effect/effect_component.tscn" id="6_c5cbu"]
[ext_resource type="PackedScene" uid="uid://dnsrij0ocvedu" path="res://components/target/target_component.tscn" id="6_jwcl3"]
[ext_resource type="PackedScene" uid="uid://dexysxyieapfn" path="res://components/stats/stats_component.tscn" id="7_a5gs1"]
[ext_resource type="PackedScene" uid="uid://bgrd5feghervg" path="res://components/hunter/hunter_component.tscn" id="7_racbe"]
[ext_resource type="PackedScene" uid="uid://bhnl54yfhv2cl" path="res://components/state/state_component.tscn" id="8_5mnij"]
[ext_resource type="PackedScene" uid="uid://jik04cg2nmq5" path="res://components/hurtbox/hurtbox_component.tscn" id="8_8uecu"]
[ext_resource type="Script" path="res://scripts/damage/damage_data.gd" id="9_3nlnd"]
[ext_resource type="PackedScene" uid="uid://tovqio0ufan6" path="res://components/velocity/velocity_component.tscn" id="9_4c2ah"]
[ext_resource type="Script" path="res://scripts/impact_data.gd" id="10_oochw"]
[ext_resource type="PackedScene" uid="uid://dl0a6p001h8ea" path="res://components/shadow/shadow_component.tscn" id="11_nyvyp"]
[ext_resource type="Script" path="res://entities/mobs/slime/states/idle.gd" id="12_xubkm"]
[ext_resource type="Script" path="res://entities/mobs/slime/states/hunt.gd" id="15_5e222"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_vmnmc"]
radius = 4.0
height = 16.0

[sub_resource type="Animation" id="Animation_mm4kq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2i(0, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ShadowComponent:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0.7, 0.7)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("VelocityComponent:friction")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [1.0]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("HurtboxComponent:monitoring")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_qxsbg"]
resource_name = "death"
length = 2.0
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6, 1.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 2), Vector2i(1, 2), Vector2i(2, 2), Vector2i(3, 2), Vector2i(4, 2), Vector2i(5, 2), Vector2i(6, 2), Vector2i(7, 2), Vector2i(8, 2), Vector2i(9, 2)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ShadowComponent:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_4kn4e"]
resource_name = "idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 0), Vector2i(1, 0), Vector2i(2, 0), Vector2i(3, 0), Vector2i(4, 0)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ShadowComponent:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("HurtboxComponent:monitoring")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_efom3"]
resource_name = "jump"
length = 1.6
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 1), Vector2i(1, 1), Vector2i(2, 1), Vector2i(3, 1), Vector2i(4, 1), Vector2i(5, 1), Vector2i(6, 1), Vector2i(7, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ShadowComponent:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ShadowComponent:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2(0.75, 0.75), Vector2(0.7, 0.7), Vector2(0.65, 0.65), Vector2(0.6, 0.6), Vector2(0.65, 0.65), Vector2(0.7, 0.7), Vector2(0.75, 0.75)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("VelocityComponent:friction")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.4, 1.4),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0.05, 1.0]
}
tracks/4/type = "method"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("StateComponent/Idle")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.4),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"move"
}]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("HurtboxComponent:monitoring")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}

[sub_resource type="Animation" id="Animation_hp2nb"]
resource_name = "jump_attack"
length = 1.6
step = 0.2
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame_coords")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2i(0, 1), Vector2i(1, 1), Vector2i(2, 1), Vector2i(3, 1), Vector2i(4, 1), Vector2i(5, 1), Vector2i(6, 1), Vector2i(7, 1)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("ShadowComponent:visible")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("ShadowComponent:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [Vector2(0.75, 0.75), Vector2(0.7, 0.7), Vector2(0.65, 0.65), Vector2(0.6, 0.6), Vector2(0.65, 0.65), Vector2(0.7, 0.7), Vector2(0.75, 0.75)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("VelocityComponent:friction")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.4, 1.4),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [0.05, 1.0]
}
tracks/4/type = "method"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("StateComponent/Hunt")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0.4),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"move"
}]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("HurtboxComponent:monitoring")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0, 0.4, 1.4),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [false, true, false]
}
tracks/6/type = "method"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("HurtboxComponent")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"clear_targets"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_uqhh3"]
_data = {
"RESET": SubResource("Animation_mm4kq"),
"death": SubResource("Animation_qxsbg"),
"idle": SubResource("Animation_4kn4e"),
"jump": SubResource("Animation_efom3"),
"jump_attack": SubResource("Animation_hp2nb")
}

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_pe1rr"]
radius = 4.8
height = 18.0

[sub_resource type="CircleShape2D" id="CircleShape2D_1xbxa"]
radius = 5.0

[sub_resource type="CircleShape2D" id="CircleShape2D_3oasb"]
radius = 100.0

[sub_resource type="Resource" id="Resource_jgp4q"]
script = ExtResource("9_3nlnd")
amount = 25.0
type = 2

[sub_resource type="Resource" id="Resource_yr7k5"]
script = ExtResource("10_oochw")
damages = Array[ExtResource("9_3nlnd")]([SubResource("Resource_jgp4q")])
knockback = 25.0
effects = Array[Resource("res://effects/effect_data.gd")]([])

[sub_resource type="CircleShape2D" id="CircleShape2D_2bamf"]
radius = 22.0

[node name="Slime" type="CharacterBody2D" node_paths=PackedStringArray("hitbox_component", "health_component", "stamina_component", "ability_component", "effect_component", "stats_component", "state_component", "velocity_component")]
script = ExtResource("1_0wyur")
hitbox_component = NodePath("HitboxComponent")
health_component = NodePath("HealthComponent")
stamina_component = NodePath("StaminaComponent")
ability_component = NodePath("AbilityComponent")
effect_component = NodePath("EffectComponent")
stats_component = NodePath("StatsComponent")
state_component = NodePath("StateComponent")
id = "Slime"
faction = 4
velocity_component = NodePath("VelocityComponent")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
visible = false
position = Vector2(0, -4)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_vmnmc")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_uqhh3")
}

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(0, -5)
texture = ExtResource("2_e62wc")
hframes = 10
vframes = 3

[node name="ShadowComponent" parent="." instance=ExtResource("11_nyvyp")]
scale = Vector2(0.7, 0.7)

[node name="VelocityComponent" parent="." node_paths=PackedStringArray("stats_component") instance=ExtResource("9_4c2ah")]
stats_component = NodePath("../StatsComponent")
speed = 50.0
acceleration = 10.0
friction = 1.0

[node name="HitboxComponent" parent="." node_paths=PackedStringArray("health_component", "velocity_component", "effect_component", "stats_component") instance=ExtResource("2_vhuxq")]
visible = false
health_component = NodePath("../HealthComponent")
velocity_component = NodePath("../VelocityComponent")
effect_component = NodePath("../EffectComponent")
stats_component = NodePath("../StatsComponent")
faction = 4

[node name="CollisionShape2D2" type="CollisionShape2D" parent="HitboxComponent"]
position = Vector2(0, -5)
rotation = 1.5708
shape = SubResource("CapsuleShape2D_pe1rr")

[node name="TargetComponent" parent="." instance=ExtResource("6_jwcl3")]
visible = false
faction = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="TargetComponent"]
position = Vector2(0, -5)
shape = SubResource("CircleShape2D_1xbxa")
debug_color = Color(0.959445, 1.44392e-06, 0.521587, 0.42)

[node name="HunterComponent" parent="." instance=ExtResource("7_racbe")]
faction = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="HunterComponent"]
shape = SubResource("CircleShape2D_3oasb")

[node name="HurtboxComponent" parent="." instance=ExtResource("8_8uecu")]
position = Vector2(0, -2)
monitoring = false
impact_data = SubResource("Resource_yr7k5")
faction = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtboxComponent"]
shape = SubResource("CircleShape2D_2bamf")

[node name="HealthComponent" parent="." node_paths=PackedStringArray("stats_component") instance=ExtResource("3_oqi6j")]
stats_component = NodePath("../StatsComponent")

[node name="StaminaComponent" parent="." node_paths=PackedStringArray("stats_component") instance=ExtResource("4_w2iwv")]
stats_component = NodePath("../StatsComponent")

[node name="AbilityComponent" parent="." node_paths=PackedStringArray("state_component") instance=ExtResource("5_hvo60")]
state_component = NodePath("../StateComponent")

[node name="EffectComponent" parent="." node_paths=PackedStringArray("health_component", "stamina_component", "velocity_component", "hitbox_component", "stats_component", "ability_component", "state_component") instance=ExtResource("6_c5cbu")]
health_component = NodePath("../HealthComponent")
stamina_component = NodePath("../StaminaComponent")
velocity_component = NodePath("../VelocityComponent")
hitbox_component = NodePath("../HitboxComponent")
stats_component = NodePath("../StatsComponent")
ability_component = NodePath("../AbilityComponent")
state_component = NodePath("../StateComponent")

[node name="StatsComponent" parent="." instance=ExtResource("7_a5gs1")]

[node name="StateComponent" parent="." node_paths=PackedStringArray("entity", "starting_state") instance=ExtResource("8_5mnij")]
entity = NodePath("..")
starting_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateComponent" node_paths=PackedStringArray("slime", "sprite", "animation_player", "hunter", "hunt_state")]
script = ExtResource("12_xubkm")
slime = NodePath("../..")
sprite = NodePath("../../Sprite2D")
animation_player = NodePath("../../AnimationPlayer")
hunter = NodePath("../../HunterComponent")
hunt_state = NodePath("../Hunt")
jump_interval = 2.5
jump_variance = 0.5

[node name="Hunt" type="Node" parent="StateComponent" node_paths=PackedStringArray("slime", "sprite", "animation_player", "hunter", "idle_state")]
script = ExtResource("15_5e222")
slime = NodePath("../..")
sprite = NodePath("../../Sprite2D")
animation_player = NodePath("../../AnimationPlayer")
hunter = NodePath("../../HunterComponent")
idle_state = NodePath("../Idle")
jump_interval = 2.0
jump_variance = 0.5
